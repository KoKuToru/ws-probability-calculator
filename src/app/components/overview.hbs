<div
  class="table"
  {{did-insert this.setWidth this.data}}
  {{did-update this.setWidth this.data}}

  {{did-insert this.calculate this.state.code}}
  {{did-update this.calculate this.state.code}}
>
  {{#each this.data as |x|}}
    {{#if x.corner}}
      <div class={{x.class}}>
        <span>ds</span>
        <span>cx</span>
        <svg viewBox="0 0 1 1" preserveAspectRatio="none">
          <line
              x1="0" y1="0" x2="1" y2="1"
              stroke="black"
              vector-effect="non-scaling-stroke"
          />
        </svg>
      </div>
    {{else if x.header}}
      <div
        class={{x.class}}
        data-x={{x.x}}
        data-y={{x.y}}
        tabindex="0"
        {{on "click" (fn this.toggleHeader x)}}
      >
        {{x.value}}
      </div>
    {{else}}
      {{#let (this.getCellValue x.value) as |value|}}
        {{#let (this.getCellClass x.value) as |class|}}
          {{#if class}}
            <div
              class={{class}}
              data-x={{x.x}}
              data-y={{x.y}}
              tabindex="0"
              {{on "click" (fn this.toggleCell x.value)}}
              title={{value}}
            >{{format-number value}}</div>
          {{else}}
            <div data-x={{x.x}} data-y={{x.y}}>
              <svg viewBox="0 0 1 1" preserveAspectRatio="none">
                <line
                    x1="0" y1="1" x2="1" y2="0"
                    stroke="lightgray"
                    vector-effect="non-scaling-stroke"
                />
              </svg>
            </div>
          {{/if}}
        {{/let}}
      {{/let}}
    {{/if}}
  {{/each}}
</div>